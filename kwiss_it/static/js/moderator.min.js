let g="",s="",d="";const u=document.getElementById("accordioncat");let p=new Map;function e(){t(),n(),o()}function t(){fetch(api_url+"/questiontype").then(e=>e.json().then(t=>{for(let e=0;e<t.length;e++)p.set(t[e].QTid,t[e].QTdescription)}))}function n(){let e=document.getElementById("templateanswer");d=e.innerHTML,e.remove();let t=document.getElementById("templateaccordionitemquestion");s=t.innerHTML,t.remove();let n=document.getElementById("templateaccordionitemclass");g=n.innerHTML,n.remove()}function o(e=api_url+"/category/?approved=true&pending=true&denied=true"){fetch(e).then(e=>e.json().then(e=>{var t=e.next,m=e.results;if(m){for(let l=0;l<m.length;l++){let e=document.createElement("div");e.innerHTML=g,e.classList.add("accordion-item"),u.appendChild(e);let t=document.getElementById("accordionheader"),n=document.getElementById("collapseOne");t.id="accordionheader"+l.toString(),t.setAttribute("data-bs-target","#collapseOne"+l.toString()),n.id="collapseOne"+l.toString();let d=document.getElementById("catname"),o=document.getElementById("catdesc"),i=document.getElementById("catstate"),r=document.getElementById("promote"),c=document.getElementById("demote");d.innerHTML=m[l].Cname,d.id="catname"+l.toString(),o.innerHTML=m[l].Cdescription,o.id="catdesc"+l.toString(),i.innerHTML=1===m[l].STid?"approved":2===m[l].STid?"denied":"pending",i.id="catstate"+l.toString(),r.innerHTML=1===m[l].STid?"pending":"approved",r.id="promote"+l.toString(),c.innerHTML=3===m[l].STid?"pending":"denied",r.addEventListener("click",function(){}),c.addEventListener("click",function(){});let a=document.getElementById("accordionquestions");a.id="accordionquestions"+l.toString(),y(l.toString(),m[l].Cid)}null!=t&&o(t)}}))}function y(u,e){url=api_url+"/question/?approved=true&pending=true&denied=true&cid="+e.toString(),fetch(url).then(e=>e.json().then(g=>{for(let m=0;m<g.length;m++){let e=document.getElementById("accordionquestions"+u),t=document.createElement("div");t.classList.add("accordion-item"),t.innerHTML=s,e.appendChild(t);let n=document.getElementById("accordionheaderquestion"),d=document.getElementById("collapseInner");n.id="category"+u+"accordionheaderquestion"+m.toString(),n.setAttribute("data-bs-target","#category"+u+"collapseInner"+m.toString()),d.id="category"+u+"collapseInner"+m.toString(),d.setAttribute("data-bs-parent","#accordionquestions"+u);let o=document.getElementById("question"),i=document.getElementById("questiontype"),r=document.getElementById("questionstate"),c=document.getElementById("qpromote"),a=document.getElementById("qdemote");o.id="category"+u+"question"+m.toString(),o.innerHTML=g[m].Qtext,i.id="category"+u+"questiontype"+m.toString(),i.innerHTML=p.get(g[m].QTid),r.id="category"+u+"questionstate"+m.toString(),r.innerHTML=1===g[m].STid?"approved":2===g[m].STid?"denied":"pending",c.id="category"+u+"qpromote"+m.toString(),c.innerHTML=1===g[m].STid?"pending":"approved",a.id="category"+u+"qdemote"+m.toString(),a.innerHTML=3===g[m].STid?"pending":"denied";let l=document.getElementById("answers");l.id="category"+u+"answers"+m.toString(),S(u,m.toString(),g[m].Qid)}}))}function S(r,c,e){e=api_url+"/answer/?qid="+e.toString();fetch(e).then(e=>e.json().then(o=>{let i=document.getElementById("category"+r+"answers"+c);for(let d=0;d<o.length;d++){let e=document.createElement("tr"),t=document.createElement("td"),n=document.createElement("td");t.id="c"+r+"q"+c+"answer"+d.toString(),t.innerHTML=o[d].Atext,n.id="c"+r+"q"+c+"correct"+d.toString(),e.appendChild(t),e.appendChild(n),i.appendChild(e)}}))}document.addEventListener("DOMContentLoaded",e);