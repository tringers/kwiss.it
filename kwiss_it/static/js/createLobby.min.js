const e=5,t=50,n=10,d=124,l=2,c=30,r=document.getElementById("categorylist"),i=document.getElementById("categorySelects"),a=document.getElementById("lobbytype");let o=1,u=1,s={};function m(e=!1,t=!1){let n="?approved=true"+(e?"&pending=true":"");t&&(o=1,s={}),fetch(api_url+"/category/"+n+"&page=1").then(e=>e.json().then(e=>{u=Math.ceil(e.count/10),fetch(api_url+"/category/"+n+"&page="+o).then(e=>e.json().then(t=>{for(let e=0;e<t.results.length;e++){var n=t.results[e];void 0===s[n.Cname]&&(s[n.Cname]=n)}h(),g()}))}))}function h(){let n=Object.keys(s);for(let t=0;t<n.length;t++){var d=s[n[t]];let e=api_url+"/question/?cid="+d.Cid;"single"!=a.value&&"Single"!=a.value||(e+="&single=1"),void 0===d.Camount&&fetch(e).then(e=>e.json().then(e=>{void 0===e||e===[]||e.length<=0?s[n[t]].Camount=0:s[n[t]].Camount=e.length,g()}))}}function g(){s=Object.keys(s).sort().reduce((e,t)=>(e[t]=s[t],e),{});let m=Object.keys(s);r.innerHTML="";for(let u=10*(o-1);u<Math.min(10*o,m.length);u++){let e=s[m[u]],t=document.createElement("tr"),n=document.createElement("td"),d=document.createElement("td"),l=document.createElement("td"),c=document.createElement("input");n.innerHTML=e.Cname,d.innerHTML=e.Camount,d.classList.add("text-center"),l.classList.add("selection-hover"),l.classList.add("text-center"),c.type="checkbox",c.name="categories",c.classList.add("form-check-input"),c.value=e.Cid.toString(),void 0===e.selected&&(e.selected=!1,s[m[u]].selected=!1),c.checked=e.selected,l.addEventListener("click",e=>{"input"!==e.path[0].localName&&(c.checked=!c.checked,s[m[u]].selected=c.checked,p())}),c.addEventListener("change",()=>{s[m[u]].selected=c.checked,p()}),l.appendChild(c),t.appendChild(n),t.appendChild(d),t.appendChild(l),r.appendChild(t);let i=document.createElement("tr"),a=document.createElement("td");i.hidden=!0,a.setAttribute("colspan","3"),a.innerText=e.Cdescription,i.appendChild(a),r.appendChild(i),n.addEventListener("click",e=>{i.hidden=!i.hidden}),d.addEventListener("click",e=>{i.hidden=!i.hidden});let o=document.createElement("tr");o.hidden=!0,r.appendChild(o)}}function p(){var n=Object.keys(s);i.innerHTML="";for(let t=0;t<n.length;t++){let e=document.createElement("input");e.value=s[n[t]].Cid.toString(),e.checked=s[n[t]].selected,i.appendChild(e)}}m(),document.getElementById("prev").addEventListener("click",()=>{o--,o<1&&(o=1),m()}),document.getElementById("next").addEventListener("click",()=>{o++,o>u&&(o=u),m()});let v=document.getElementById("lobbypasswordfield"),E=document.getElementById("lobbynamefield"),y=document.getElementById("createlobbyname"),f=document.getElementById("playeramountfielddiv"),b=document.getElementById("gamerace"),k=document.getElementById("gamebasic");function C(){v.hidden=!0,E.hidden=!1,f.hidden=!1,b.removeAttribute("disabled")}function B(){v.hidden=!1,E.hidden=!1,f.hidden=!1,b.removeAttribute("disabled")}function I(){v.hidden=!0,E.hidden=!0,y.value="",f.setAttribute("hidden","true"),H.checked,h(),b.setAttribute("disabled","true"),k.checked=!0}a.addEventListener("change",function(){"Ã–ffentlich"===a.value||"public"===a.value?C():"Privat"===a.value||"private"===a.value?B():"Single"!==a.value&&"single"!==a.value||I()});let L=document.getElementById("questionamountslider"),M=document.getElementById("questionamountfield");T(L,M,e,t);let j=document.getElementById("timeamountslider"),x=document.getElementById("timeamountfield");T(j,x,n,d);let A=document.getElementById("playeramountslider"),S=document.getElementById("playeramountfield");function T(t,n,d,l){let e=function(e){e=Math.min(e,l),e=Math.max(e,d),t.value=e,n.value=e};t.addEventListener("change",()=>{e(t.value)}),n.addEventListener("change",()=>{e(n.value)})}T(A,S,l,c);let H=document.getElementById("pending");H.addEventListener("change",function(){H.checked?m(!0,!1):m(!1,!0)});