const e=5,t=50,n=10,d=124,c=2,l=16,m=document.getElementById("categorylist"),i=document.getElementById("categorySelects");let a=1,o=1,s={};function u(e=!1,t=!1){let n="?approved=true"+(e?"&pending=true":"");t&&(a=1,s={}),fetch(api_url+"/category/"+n+"&page=1").then(e=>e.json().then(e=>{o=Math.ceil(e.count/10),fetch(api_url+"/category/"+n+"&page="+a).then(e=>e.json().then(t=>{for(let e=0;e<t.results.length;e++){var n=t.results[e];void 0===s[n.Cname]&&(s[n.Cname]=n)}r(),h()}))}))}function r(){let n=Object.keys(s);for(let t=0;t<n.length;t++){var e=s[n[t]];void 0===e.Camount&&fetch(api_url+"/question/?cid="+e.Cid).then(e=>e.json().then(e=>{void 0===e||e===[]||e.length<=0?s[n[t]].Camount=0:s[n[t]].Camount=e.length,h()}))}}function h(){s=Object.keys(s).sort().reduce((e,t)=>(e[t]=s[t],e),{});let r=Object.keys(s);m.innerHTML="";for(let u=10*(a-1);u<Math.min(10*a,r.length);u++){let e=s[r[u]],t=document.createElement("tr"),n=document.createElement("td"),d=document.createElement("td"),c=document.createElement("td"),l=document.createElement("input");n.innerHTML=e.Cname,d.innerHTML=e.Camount,d.classList.add("text-center"),c.classList.add("selection-hover"),c.classList.add("text-center"),l.type="checkbox",l.name="categories",l.classList.add("form-check-input"),l.value=e.Cid.toString(),void 0===e.selected&&(e.selected=!1,s[r[u]].selected=!1),l.checked=e.selected,c.addEventListener("click",e=>{"input"!==e.path[0].localName&&(l.checked=!l.checked,s[r[u]].selected=l.checked,p())}),l.addEventListener("change",()=>{s[r[u]].selected=l.checked,p()}),c.appendChild(l),t.appendChild(n),t.appendChild(d),t.appendChild(c),m.appendChild(t);let i=document.createElement("tr"),a=document.createElement("td");i.hidden=!0,a.setAttribute("colspan","3"),a.innerText=e.Cdescription,i.appendChild(a),m.appendChild(i),n.addEventListener("click",e=>{i.hidden=!i.hidden}),d.addEventListener("click",e=>{i.hidden=!i.hidden});let o=document.createElement("tr");o.hidden=!0,m.appendChild(o)}}function p(){var n=Object.keys(s);i.innerHTML="";for(let t=0;t<n.length;t++){let e=document.createElement("input");e.value=s[n[t]].Cid.toString(),e.checked=s[n[t]].selected,i.appendChild(e)}}u(),document.getElementById("prev").addEventListener("click",()=>{a--,a<1&&(a=1),u()}),document.getElementById("next").addEventListener("click",()=>{a++,a>o&&(a=o),u()});let g=document.getElementById("lobbytype"),v=document.getElementById("lobbypasswordfield");function E(){v.hidden=!0}function y(){v.hidden=!1}g.addEventListener("change",function(){"Ã–ffentlich"===g.value||"public"===g.value?E():"Privat"!==g.value&&"private"!==g.value||y()});let f=document.getElementById("questionamountslider"),C=document.getElementById("questionamountfield");b(f,C,e,t);let k=document.getElementById("timeamountslider"),L=document.getElementById("timeamountfield");b(k,L,n,d);let B=document.getElementById("playeramountslider"),I=document.getElementById("playeramountfield");function b(t,n,d,c){let e=function(e){e=Math.min(e,c),e=Math.max(e,d),t.value=e,n.value=e};t.addEventListener("change",()=>{e(t.value)}),n.addEventListener("change",()=>{e(n.value)})}b(B,I,c,l);let M=document.getElementById("pending");M.addEventListener("change",function(){M.checked?u(!0,!1):u(!1,!0)});