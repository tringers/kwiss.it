const e=5,t=50,n=10,d=124,c=2,l=30,r=document.getElementById("categorylist"),i=document.getElementById("categorySelects"),a=document.getElementById("lobbytype");let u=1,o=1,s={};function m(e=!1,t=!1){let n="?approved=true"+(e?"&pending=true":"");t&&(u=1,s={}),fetch(api_url+"/category/"+n+"&page=1").then(e=>e.json().then(e=>{o=Math.ceil(e.count/10),fetch(api_url+"/category/"+n+"&page="+u).then(e=>e.json().then(t=>{for(let e=0;e<t.results.length;e++){var n=t.results[e];void 0===s[n.Cname]&&(s[n.Cname]=n)}h(),g()}))}))}function h(){let n=Object.keys(s);for(let t=0;t<n.length;t++){var d=s[n[t]];let e=api_url+"/question/?cid="+d.Cid+"&approved=true"+(H?"&pending=true":"");"single"!=a.value&&"Single"!=a.value||(e+="&single=1"),void 0===d.Camount&&fetch(e).then(e=>e.json().then(e=>{void 0===e||e===[]||e.length<=0?s[n[t]].Camount=0:s[n[t]].Camount=e.length,g()}))}}function g(){s=Object.keys(s).sort().reduce((e,t)=>(e[t]=s[t],e),{});let m=Object.keys(s);r.innerHTML="";for(let o=10*(u-1);o<Math.min(10*u,m.length);o++){let e=s[m[o]],t=document.createElement("tr"),n=document.createElement("td"),d=document.createElement("td"),c=document.createElement("td"),l=document.createElement("input");n.innerHTML=e.Cname,d.innerHTML=e.Camount,d.classList.add("text-center"),c.classList.add("selection-hover"),c.classList.add("text-center"),l.type="checkbox",l.name="categories",l.classList.add("form-check-input"),l.value=e.Cid.toString(),void 0===e.selected&&(e.selected=!1,s[m[o]].selected=!1),l.checked=e.selected,l.addEventListener("click",e=>{l.checked=!l.checked,s[m[o]].selected=l.checked,p()}),c.addEventListener("click",e=>{l.checked=!l.checked,s[m[o]].selected=l.checked,p()}),l.addEventListener("change",()=>{s[m[o]].selected=l.checked,p()}),c.appendChild(l),t.appendChild(n),t.appendChild(d),t.appendChild(c),r.appendChild(t);let i=document.createElement("tr"),a=document.createElement("td");i.hidden=!0,a.setAttribute("colspan","3"),a.innerText=e.Cdescription,i.appendChild(a),r.appendChild(i),n.addEventListener("click",e=>{i.hidden=!i.hidden}),d.addEventListener("click",e=>{i.hidden=!i.hidden});let u=document.createElement("tr");u.hidden=!0,r.appendChild(u)}}function p(){var n=Object.keys(s);i.innerHTML="";for(let t=0;t<n.length;t++){let e=document.createElement("input");e.value=s[n[t]].Cid.toString(),e.checked=s[n[t]].selected,i.appendChild(e)}}m(),document.getElementById("prev").addEventListener("click",()=>{u--,u<1&&(u=1),m()}),document.getElementById("next").addEventListener("click",()=>{u++,u>o&&(u=o),m()});let v=document.getElementById("lobbypasswordfield"),E=document.getElementById("lobbynamefield"),y=document.getElementById("createlobbyname"),f=document.getElementById("playeramountfielddiv"),k=document.getElementById("gamerace"),b=document.getElementById("gamebasic");function C(){v.hidden=!0,E.hidden=!1,f.hidden=!1,k.removeAttribute("disabled")}function L(){v.hidden=!1,E.hidden=!1,f.hidden=!1,k.removeAttribute("disabled")}function B(){v.hidden=!0,E.hidden=!0,y.value="",f.setAttribute("hidden","true"),H.checked,h(),k.setAttribute("disabled","true"),b.checked=!0}a.addEventListener("change",function(){"Ã–ffentlich"===a.value||"public"===a.value?C():"Privat"===a.value||"private"===a.value?L():"Single"!==a.value&&"single"!==a.value||B()});let I=document.getElementById("questionamountslider"),M=document.getElementById("questionamountfield");T(I,M,e,t);let j=document.getElementById("timeamountslider"),x=document.getElementById("timeamountfield");T(j,x,n,d);let A=document.getElementById("playeramountslider"),S=document.getElementById("playeramountfield");function T(t,n,d,c){let e=function(e){e=Math.min(e,c),e=Math.max(e,d),t.value=e,n.value=e};t.addEventListener("change",()=>{e(t.value)}),n.addEventListener("change",()=>{e(n.value)})}T(A,S,c,l);let H=document.getElementById("pending");H.addEventListener("change",function(){H.checked?m(!0,!1):m(!1,!0)});