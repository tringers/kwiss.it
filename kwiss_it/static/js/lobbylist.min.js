function a(){fetch(api_url+"/lobby/").then(e=>e.json().then(t=>{let o=document.getElementById("table-body");for(let e=0;e<t.length;e++){let s=t[e];fetch(api_url+"/lobbyuser/?lkey="+s.Lkey).then(e=>e.json().then(e=>{let t=document.createElement("tr"),n=document.createElement("td"),l=document.createElement("td"),a=document.createElement("td"),d=document.createElement("td"),i=document.createElement("td"),r=null;n.innerHTML=s.Lprivate?"&#128274":"",l.innerHTML=s.Lname,a.innerHTML=e.length+" / "+s.Lplayerlimit,d.innerHTML=list_lobbytype[s.Ltype]||s.Ltype,s.Lprivate?(r=document.createElement("button"),r.innerHTML="Beitreten",r.classList.add("btn"),r.classList.add("btn-outline-primary"),r.classList.add("btn-sm"),r.classList.add("col-12"),r.setAttribute("role","button"),r.setAttribute("data-bs-toggle","modal"),r.setAttribute("data-bs-target","#joinPrivate"),r.addEventListener("click",()=>{let e=document.getElementById("joinPrivate");e.setAttribute("data-lobbykey",s.Lkey)})):(r=document.createElement("a"),r.innerHTML="Beitreten",r.href="/lobby/"+s.Lkey+"/",r.classList.add("btn"),r.classList.add("btn-outline-primary"),r.classList.add("btn-sm"),r.classList.add("col-12"),r.setAttribute("role","button")),e.length===s.Lplayerlimit&&(r.disabled=!0),i.appendChild(r),t.appendChild(n),t.appendChild(l),t.appendChild(a),t.appendChild(d),t.appendChild(i),o.appendChild(t)}))}}).catch(e=>{})).catch(e=>{})}list_lobbytype=[],fetch(api_url+"/lobbytype/").then(e=>e.json().then(t=>{for(let e=0;e<t.length;e++){var n=t[e],l=parseInt(n.LTid);list_lobbytype[l]=n.LTdescription}a()}).catch(e=>{})).catch(e=>{});let n=document.getElementById("joinPrivate"),l=document.getElementById("inputLobbyPassword"),e=document.getElementById("submitLobbyPassword");e.addEventListener("click",()=>{var e=l.value,t=n.getAttribute("data-lobbykey"),e=encodeURI(e);window.location.href=base_url+"/lobby/"+t+"/?passhash="+e});