function l(){fetch(api_url+"/lobby/").then(t=>t.json().then(e=>{let s=document.getElementById("table-body");for(let t=0;t<e.length;t++){let o=e[t];fetch(api_url+"/lobbyuser/?lkey="+o.Lkey).then(t=>t.json().then(t=>{let e=document.createElement("tr"),n=document.createElement("td"),a=document.createElement("td"),l=document.createElement("td"),d=document.createElement("td"),i=document.createElement("td"),r=null;n.innerHTML=o.Lprivate?"&#128274":"",a.innerHTML=o.Lname,l.innerHTML=t.length+" / "+o.Lplayerlimit,d.innerHTML=list_lobbytype[o.Ltype]||o.Ltype,o.Lprivate?(r=document.createElement("button"),r.innerHTML="Beitreten",r.classList.add("btn"),r.classList.add("btn-outline-primary"),r.classList.add("btn-sm"),r.classList.add("col-12"),r.setAttribute("role","button"),r.setAttribute("data-bs-toggle","modal"),r.setAttribute("data-bs-target","#joinPrivate"),r.addEventListener("click",()=>{let t=document.getElementById("joinPrivate");t.setAttribute("data-lobbykey",o.Lkey)})):(r=document.createElement("a"),r.innerHTML="Beitreten",r.href="/lobby/"+o.Lkey+"/",r.classList.add("btn"),r.classList.add("btn-outline-primary"),r.classList.add("btn-sm"),r.classList.add("col-12"),r.setAttribute("role","button")),t.length===o.Lplayerlimit&&(r.disabled=!0),i.appendChild(r),e.appendChild(n),e.appendChild(a),e.appendChild(l),e.appendChild(d),e.appendChild(i),s.appendChild(e)}))}}).catch(t=>{})).catch(t=>{})}list_lobbytype=[],fetch(api_url+"/lobbytype/").then(t=>t.json().then(e=>{for(let t=0;t<e.length;t++){var n=e[t],a=parseInt(n.LTid);list_lobbytype[a]=n.LTdescription}l()}).catch(t=>{})).catch(t=>{});let n=document.getElementById("joinPrivate"),a=document.getElementById("inputLobbyPassword"),t=document.getElementById("submitLobbyPassword");t.addEventListener("click",()=>{var t=a.value;let e=n.getAttribute("data-lobbykey");d(t,25e4).then(t=>{window.location.href=base_url+"/lobby/"+e+"/?passhash="+t})});async function d(t,e){let n=(new TextEncoder).encode(t);for(let t=0;t<e;t++){var a=await crypto.subtle.digest("SHA-256",n);n=Array.from(new Uint8Array(a))}return n.map(t=>t.toString(16).padStart(2,"0")).join("")}